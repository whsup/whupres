<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<html>
<head>
<style>

</style>
<script type="text/javascript" src="jquery-git2.min.js"></script>
<script src="highcharts/highcharts.js"></script>
<script src="highcharts/drilldown.js"></script>
<script src="highcharts/data.js"></script>
<script src="highcharts/exporting.js"></script>
<script src="column.js"></script>
<script src="pie.js"></script>
<script src="pie_dd.js"></script>
<script type="text/javascript">
jQuery(document).ready(function() {
 var indicator = {};
 
 function getParam(){
		var params = {};
        pairs = document.URL.split('?').pop().split('&');
		for (var i = 0, p; i < pairs.length; i++) {
           p = pairs[i].split('=');
           params[ p[0] ] =  p[1];
		}     
		return params;
 }
 $('#getParam-button').click(function(){
    var params = getParam();
	$('#param').html('<p>show param</p>'); 
	for(var i in params)
	{
	  $('#param').append('<br>').append(i + "," + params[i]);
	}
   
 })
 function setUrlPath()
 {
 	var params = getParam();
	var urlPath = "http://localhost:3000/";
 	if(params["data"] == "1")
 		urlPath = urlPath + "getAWDData";
 	else if (params["data"] == "2")
 		urlPath = urlPath + "getNSEStockData";
 	return urlPath 
 }
 
$('#action-button').click(function() {
   $.ajax({
      url: setUrlPath(),
      data: {
         format: 'json'
      },
      error: function() {
         $('#info').html('<p>An error has occurred</p>');
      },
      dataType: 'json',
      success: function(result) {
         //alert("success");
		 //column(result);
		 //file:///C:/whsup/whupserver/public/what.html?data=1&typechart=1
		 var params = getParam();
		 var type = params["typechart"]
		 if(type == '1')
			pie(result);
		 else if(type == '2') 
		 	piedd(result);
		 else if(type=='3')
		 	pie(result)
		 else // default is column chart
		    column(result);
	  },
      type: 'GET'
   });
});
})
</script>
</head>
<body>
<button id="action-button">Click me to load info!</button>
<button id="getParam-button">show param</button>
<div id="info"></div> 
<div id="param"></div> 
<div id="log"></div> 

<div id="container" style="min-width: 300px; height: 400px; margin: 0 auto"></div>
        
</body>
</html>